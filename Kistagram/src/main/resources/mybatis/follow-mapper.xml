<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="follow">
<!-- 나의 팔로워 리스트 조회 -->
	<select id="selectFollower" resultType="follow">
		SELECT *
		FROM member
		WHERE id in (SELECT follower
		                        FROM follow
		                        WHERE following = #{id})
			
    </select>
 <!-- 내가 팔로우 하는 사람 리스트 조회 -->   
 	<select id="selectFollowing" resultType="follow">
	    SELECT *
		FROM member
		WHERE id in (SELECT following
		                        FROM follow
		                        WHERE follower = #{id})
		                        
	</select>
	
	<insert id="insertFollow" parameterType="follow">
	
		INSERT INTO follow
		(id, following, follower)
		VALUES (#{id}, #{following}, #{id})
	</insert>
	
	<!-- 나의 팔로워 수 조회 -->
	<select id="selectFollowerCount" resultType="int">
	
		SELECT COUNT(*) 
		FROM follow 
		WHERE id = #{id}
	
    </select>
    <!-- 내가 팔로우 하는 수 조회 -->
    <select id="selectFollowCount" resultType="int">
		
		SELECT COUNT(*) 
		FROM follow
		WHERE following = #{id}
			
    </select>
    
    <select id="selectFollowState" resultType="int">
    	SELECT COUNT(*)
    	FROM follow
    	WHERE id=#{id}
    	AND following=#{id2}
    
    </select>
</mapper>
	